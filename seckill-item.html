<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <title>乐优商城--秒杀详情页</title>
    <link rel="icon" href="/assets/img/favicon.ico">


    <link rel="stylesheet" type="text/css" href="css/webbase.css"/>
    <link rel="stylesheet" type="text/css" href="css/pages-zoom.css"/>
    <link rel="stylesheet" type="text/css" href="css/pages-seckill-item.css"/>
    <link rel="stylesheet" type="text/css" href="css/widget-cartPanelView.css"/>
    <script src="/js/axios.min.js"></script>
    <script src="/js/moment.min.js"></script>
    <script src="/js/common.js"></script>
</head>

<body>

<!-- 头部栏位 -->
<!--页面顶部，由js动态加载-->
<script type="text/javascript" src="plugins/jquery/jquery.min.js"></script>
<div id="nav-bottom"></div>
<script type="text/javascript">$("#nav-bottom").load("top.html");</script>

<script type="text/javascript" src="js/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#service").hover(function () {
            $(".service").show();
        }, function () {
            $(".service").hide();
        });
        $("#shopcar").hover(function () {
            $("#shopcarlist").show();
        }, function () {
            $("#shopcarlist").hide();
        });

    })
</script>
<script type="text/javascript" src="js/widget/cartPanelView.js"></script>
<script type="text/javascript" src="js/model/cartModel.js"></script>
<script type="text/javascript" src="js/czFunction.js"></script>
<script type="text/javascript" src="js/plugins/jquery.easing/jquery.easing.min.js"></script>
<script type="text/javascript" src="js/plugins/sui/sui.min.js"></script>
<script type="text/javascript" src="js/plugins/jquery.jqzoom/jquery.jqzoom.js"></script>
<script type="text/javascript" src="js/plugins/jquery.jqzoom/zoom.js"></script>
<script type="text/javascript">
    $(function () {
        $("ul.btn-choose li a.btn-xlarge").click(function () {
            alert("钻中");
        });
        $("#star").click(function () {
            alert("关注成功");
        })
    })
</script>
</body>
<div class="py-container" id="app">
    <div id="item">
        <div class="crumb-wrap">
            <ul class="sui-breadcrumb">
                <li>
                    <a href="#">手机、数码、通讯</a>
                </li>
                <li>
                    <a href="#">手机</a>
                </li>
                <li>
                    <a href="#">Apple苹果</a>
                </li>
                <li class="active">iphone 6S系类</li>
            </ul>
        </div>
        <!--product-info-->
        <div class="product-info">
            <div class="fl preview-wrap">
                <!--放大镜效果-->
                <div class="zoom">
                    <!--默认第一个预览-->
                    <div id="preview" class="spec-preview">
                        <span class="jqzoom"><img jqimg="../img/_/b1.png" src="./img/_/s1.png"/></span>
                    </div>
                    <!--下方的缩略图-->
                    <div class="spec-scroll">
                        <a class="prev">&lt;</a>
                        <!--左右按钮-->
                        <div class="items">
                            <ul>
                                <li><img src="./img/_/s1.png" bimg="../img/_/b1.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s2.png" bimg="../img/_/b2.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s3.png" bimg="../img/_/b3.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s1.png" bimg="../img/_/b1.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s2.png" bimg="../img/_/b2.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s3.png" bimg="../img/_/b3.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s1.png" bimg="../img/_/b1.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s2.png" bimg="../img/_/b2.png" onmousemove="preview(this)"/>
                                </li>
                                <li><img src="./img/_/s3.png" bimg="../img/_/b3.png" onmousemove="preview(this)"/>
                                </li>
                            </ul>
                        </div>
                        <a class="next">&gt;</a>
                    </div>
                </div>
                <div class="product-collect">
                    <a href="javascript:;" id="star"><img src="./img/_/shi_heart.png" alt=""> 收藏</a>
                </div>
            </div>
            <div class="fr itemInfo-wrap">
                <div class="sku-name">
                    <h4>{{entity.title}}</h4>
                </div>
                <div class="news">
                    <span><img src="./img/_/clock.png"/>青橙秒杀</span>
                    <span class="overtime">{{message}}</span>
                </div>
                <div class="summary">
                    <div class="summary-wrap">

                        <div class="fl title">
                            <i>价　　格</i>
                        </div>
                        <div class="fl price">
                            <i>¥</i>
                            <em>{{entity.costPrice}}</em>
                            <span>原价：{{entity.price}}</span>
                        </div>
                        <div class="fr remark">
                            <i>剩余库存</i><em>{{entity.stockCount}}</em>
                        </div>
                    </div>
                    <div class="summary-wrap">
                        <div class="fl title">
                            <i>促　　销</i>
                        </div>
                        <div class="fl fix-width">
                            <i class="red-bg">加价购</i>
                            <em class="t-gray">满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</em>
                        </div>
                    </div>
                </div>
                <div class="support">
                    <div class="summary-wrap">
                        <div class="fl title">
                            <i>支　　持</i>
                        </div>
                        <div class="fl fix-width">
                            <em class="t-gray">以旧换新，闲置手机回收 4G套餐超值抢 礼品购</em>
                        </div>
                    </div>
                    <div class="summary-wrap">
                        <div class="fl title">
                            <i>配 送 至</i>
                        </div>
                        <div class="fl fix-width">
                            <em class="t-gray">满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</em>
                        </div>
                    </div>
                </div>
                <div class="clearfix choose">
                    <div id="specification" class="summary-wrap clearfix">
                        <dl>
                            <dt>
                                <div class="fl title">
                                    <i>选择颜色</i>
                                </div>
                            </dt>
                            <dd><a href="javascript:;" class="selected">金色<span title="点击取消选择">&nbsp;</span>
                            </a></dd>
                        </dl>
                        <dl>
                            <dt>
                                <div class="fl title">
                                    <i>内存容量</i>
                                </div>
                            </dt>
                            <dd><a href="javascript:;" class="selected">16G<span title="点击取消选择">&nbsp;</span>
                            </a></dd>
                        </dl>
                        <dl>
                            <dt>
                                <div class="fl title">
                                    <i>选择版本</i>
                                </div>
                            </dt>
                            <dd><a href="javascript:;" class="selected">公开版<span title="点击取消选择">&nbsp;</span>
                            </a></dd>
                        </dl>
                        <dl>
                            <dt>
                                <div class="fl title">
                                    <i>购买方式</i>
                                </div>
                            </dt>
                            <dd><a href="javascript:;" class="selected">官方标配<span title="点击取消选择">&nbsp;</span>
                            </a></dd>
                        </dl>
                        <dl>
                            <dt>
                                <div class="fl title">
                                    <i>套　　装</i>
                                </div>
                            </dt>
                            <dd><a href="javascript:;" class="selected">保护套装<span title="点击取消选择">&nbsp;</span>
                            </a></dd>
                        </dl>


                    </div>


                    <div class="summary-wrap">
                        <div class="fl title">
                            <div class="control-group">
                                <div class="controls">
                                    <input autocomplete="off" type="text" readonly="readonly" value="1" minnum="1"
                                           class="itxt"/>
                                    <a href="javascript:void(0)" class="increment plus"></a>
                                    <a href="javascript:void(0)" class="increment mins"></a>
                                </div>
                            </div>
                        </div>
                        <div class="fl">
                            <ul class="btn-choose unstyled">
                                <li style="line-height: 50px;">
                                    <a href="javascript:void(0)" @click="add()" class="addshopcar">立即抢购</a>{{msg}}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--product-detail-->
        <div class="clearfix product-detail">
            <div class="fl aside">
                <div class="shop">
                    <span class="fl">三星旗舰店</span><span class="fr"><a href="shop.html" target="_blank"
                                                                     class="sui-btn btn-bordered btn-danger">进入店铺</a></span>
                </div>
                <div class="clearfix"></div>
                <ul class="sui-nav nav-tabs tab-wraped">
                    <li class="active">
                        <a href="#index" data-toggle="tab">
                            <span>相关分类</span>
                        </a>
                    </li>
                    <li>
                        <a href="#profile" data-toggle="tab">
                            <span>推荐品牌</span>
                        </a>
                    </li>
                </ul>
                <div class="tab-content tab-wraped">
                    <div id="index" class="tab-pane active">
                        <ul class="part-list unstyled">
                            <li>手机</li>
                            <li>手机壳</li>
                            <li>内存卡</li>
                            <li>Iphone配件</li>
                            <li>贴膜</li>
                            <li>手机耳机</li>
                            <li>移动电源</li>
                            <li>平板电脑</li>
                        </ul>
                        <ul class="goods-list unstyled">
                            <li>
                                <div class="list-wrap">
                                    <div class="p-img">
                                        <img src="./img/_/part01.png"/>
                                    </div>
                                    <div class="attr">
                                        <em>Apple苹果iPhone 6s (A1699)</em>
                                    </div>
                                    <div class="price">
                                        <strong>
                                            <em>¥</em>
                                            <i>6088.00</i>
                                        </strong>
                                    </div>
                                    <div class="operate">
                                        <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="list-wrap">
                                    <div class="p-img">
                                        <img src="./img/_/part02.png"/>
                                    </div>
                                    <div class="attr">
                                        <em>Apple苹果iPhone 6s (A1699)</em>
                                    </div>
                                    <div class="price">
                                        <strong>
                                            <em>¥</em>
                                            <i>6088.00</i>
                                        </strong>
                                    </div>
                                    <div class="operate">
                                        <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="list-wrap">
                                    <div class="p-img">
                                        <img src="./img/_/part03.png"/>
                                    </div>
                                    <div class="attr">
                                        <em>Apple苹果iPhone 6s (A1699)</em>
                                    </div>
                                    <div class="price">
                                        <strong>
                                            <em>¥</em>
                                            <i>6088.00</i>
                                        </strong>
                                    </div>
                                    <div class="operate">
                                        <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                    </div>
                                </div>
                                <div class="list-wrap">
                                    <div class="p-img">
                                        <img src="./img/_/part02.png"/>
                                    </div>
                                    <div class="attr">
                                        <em>Apple苹果iPhone 6s (A1699)</em>
                                    </div>
                                    <div class="price">
                                        <strong>
                                            <em>¥</em>
                                            <i>6088.00</i>
                                        </strong>
                                    </div>
                                    <div class="operate">
                                        <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                    </div>
                                </div>
                                <div class="list-wrap">
                                    <div class="p-img">
                                        <img src="./img/_/part03.png"/>
                                    </div>
                                    <div class="attr">
                                        <em>Apple苹果iPhone 6s (A1699)</em>
                                    </div>
                                    <div class="price">
                                        <strong>
                                            <em>¥</em>
                                            <i>6088.00</i>
                                        </strong>
                                    </div>
                                    <div class="operate">
                                        <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="profile" class="tab-pane">
                        <p>推荐品牌</p>
                    </div>
                </div>
            </div>
            <div class="fr detail">
                <div class="clearfix fitting">
                    <h4 class="kt">选择搭配</h4>
                    <div class="good-suits">
                        <div class="fl master">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="./img/_/l-m01.png"/>
                                </div>
                                <em>￥5299</em>
                                <i>+</i>
                            </div>
                        </div>
                        <div class="fl suits">
                            <ul class="suit-list">
                                <li class="">
                                    <div id="">
                                        <img src="./img/_/dp01.png"/>
                                    </div>
                                    <i>Feless费勒斯VR</i>
                                    <label data-toggle="checkbox" class="checkbox-pretty">
                                        <input type="checkbox"><span>39</span>
                                    </label>
                                </li>
                                <li class="">
                                    <div id=""><img src="./img/_/dp02.png"/></div>
                                    <i>Feless费勒斯VR</i>
                                    <label data-toggle="checkbox" class="checkbox-pretty">
                                        <input type="checkbox"><span>50</span>
                                    </label>
                                </li>
                                <li class="">
                                    <div id=""><img src="./img/_/dp03.png"/></div>
                                    <i>Feless费勒斯VR</i>
                                    <label data-toggle="checkbox" class="checkbox-pretty">
                                        <input type="checkbox"><span>59</span>
                                    </label>
                                </li>
                                <li class="">
                                    <div id=""><img src="./img/_/dp04.png"/></div>
                                    <i>Feless费勒斯VR</i>
                                    <label data-toggle="checkbox" class="checkbox-pretty">
                                        <input type="checkbox"><span>99</span>
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="fr result">
                            <div class="num">已选购0件商品</div>
                            <div class="price-tit"><strong>套餐价</strong></div>
                            <div class="price">￥5299</div>
                            <button class="sui-btn  btn-danger addshopcar">加入购物车</button>
                        </div>
                    </div>
                </div>
                <div class="tab-main intro">
                    <ul class="sui-nav nav-tabs tab-wraped">
                        <li class="active">
                            <a href="#one" data-toggle="tab">
                                <span>商品介绍</span>
                            </a>
                        </li>
                        <li>
                            <a href="#two" data-toggle="tab">
                                <span>规格与包装</span>
                            </a>
                        </li>
                        <li>
                            <a href="#three" data-toggle="tab">
                                <span>售后保障</span>
                            </a>
                        </li>
                        <li>
                            <a href="#four" data-toggle="tab">
                                <span>商品评价</span>
                            </a>
                        </li>
                        <li>
                            <a href="#five" data-toggle="tab">
                                <span>手机社区</span>
                            </a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                    <div class="tab-content tab-wraped">
                        <div id="one" class="tab-pane active">
                            <ul class="goods-intro unstyled">
                                <li>分辨率：1920*1080(FHD)</li>
                                <li>后置摄像头：1200万像素</li>
                                <li>前置摄像头：500万像素</li>
                                <li>核 数：其他</li>
                                <li>频 率：以官网信息为准</li>
                                <li>品牌： Apple</li>
                                <li>商品名称：APPLEiPhone 6s Plus</li>
                                <li>商品编号：1861098</li>
                                <li>商品毛重：0.51kg</li>
                                <li>商品产地：中国大陆</li>
                                <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                                <li>系统：苹果（IOS）</li>
                                <li>像素：1000-1600万</li>
                                <li>机身内存：64GB</li>
                            </ul>
                            <div class="intro-detail">
                                <img src="./img/_/intro01.png"/>
                                <img src="./img/_/intro02.png"/>
                                <img src="./img/_/intro03.png"/>
                            </div>
                        </div>
                        <div id="two" class="tab-pane">
                            <p>规格与包装</p>
                        </div>
                        <div id="three" class="tab-pane">
                            <p>售后保障</p>
                        </div>
                        <div id="four" class="tab-pane">
                            <p>商品评价</p>
                        </div>
                        <div id="five" class="tab-pane">
                            <p>手机社区</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--like-->
        <div class="clearfix"></div>
        <div class="like">
            <h4 class="kt">猜你喜欢</h4>
            <div class="like-list">
                <ul class="yui3-g">
                    <li class="yui3-u-1-6">
                        <div class="list-wrap">
                            <div class="p-img">
                                <img src="./img/_/itemlike01.png"/>
                            </div>
                            <div class="attr">
                                <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                            </div>
                            <div class="price">
                                <strong>
                                    <em>¥</em>
                                    <i>3699.00</i>
                                </strong>
                            </div>
                            <div class="commit">
                                <i class="command">已有6人评价</i>
                            </div>
                        </div>
                    </li>
                    <li class="yui3-u-1-6">
                        <div class="list-wrap">
                            <div class="p-img">
                                <img src="./img/_/itemlike02.png"/>
                            </div>
                            <div class="attr">
                                <em>Apple苹果iPhone 6s/6s Plus 16G 64G 128G</em>
                            </div>
                            <div class="price">
                                <strong>
                                    <em>¥</em>
                                    <i>4388.00</i>
                                </strong>
                            </div>
                            <div class="commit">
                                <i class="command">已有700人评价</i>
                            </div>
                        </div>
                    </li>
                    <li class="yui3-u-1-6">
                        <div class="list-wrap">
                            <div class="p-img">
                                <img src="./img/_/itemlike03.png"/>
                            </div>
                            <div class="attr">
                                <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                            </div>
                            <div class="price">
                                <strong>
                                    <em>¥</em>
                                    <i>4088.00</i>
                                </strong>
                            </div>
                            <div class="commit">
                                <i class="command">已有700人评价</i>
                            </div>
                        </div>
                    </li>
                    <li class="yui3-u-1-6">
                        <div class="list-wrap">
                            <div class="p-img">
                                <img src="./img/_/itemlike04.png"/>
                            </div>
                            <div class="attr">
                                <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                            </div>
                            <div class="price">
                                <strong>
                                    <em>¥</em>
                                    <i>4088.00</i>
                                </strong>
                            </div>
                            <div class="commit">
                                <i class="command">已有700人评价</i>
                            </div>
                        </div>
                    </li>
                    <li class="yui3-u-1-6">
                        <div class="list-wrap">
                            <div class="p-img">
                                <img src="./img/_/itemlike05.png"/>
                            </div>
                            <div class="attr">
                                <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                            </div>
                            <div class="price">
                                <strong>
                                    <em>¥</em>
                                    <i>4088.00</i>
                                </strong>
                            </div>
                            <div class="commit">
                                <i class="command">已有700人评价</i>
                            </div>
                        </div>
                    </li>
                    <li class="yui3-u-1-6">
                        <div class="list-wrap">
                            <div class="p-img">
                                <img src="./img/_/itemlike06.png"/>
                            </div>
                            <div class="attr">
                                <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                            </div>
                            <div class="price">
                                <strong>
                                    <em>¥</em>
                                    <i>4088.00</i>
                                </strong>
                            </div>
                            <div class="commit">
                                <i class="command">已有700人评价</i>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 底部栏位 -->
<!--页面底部，由js动态加载-->
<div class="clearfix footer"></div>
<script type="text/javascript">$(".footer").load("foot.html");</script>
<!--页面底部END-->


<!--侧栏面板开始,由js动态加载-->
<script type="text/javascript" src="plugins/jquery/jquery.min.js"></script>
<div class="J-global-toolbar"></div>
<script type="text/javascript">$(".J-global-toolbar").load("side.html");</script>

<!--购物车单元格 模板-->
<script type="text/template" id="tbar-cart-item-template">
    <div class="tbar-cart-item">
        <div class="jtc-item-promo">
            <em class="promo-tag promo-mz">满赠<i class="arrow"></i></em>
            <div class="promo-text">已购满600元，您可领赠品</div>
        </div>
        <div class="jtc-item-goods">
            <span class="p-img"><a href="#" target="_blank"><img src="{2}" alt="{1}" height="50" width="50"/></a></span>
            <div class="p-name">
                <a href="#">{1}</a>
            </div>
            <div class="p-price"><strong>¥{3}</strong>×{4}</div>
            <a href="#none" class="p-del J-del">删除</a>
        </div>
    </div>
</script>
<!--侧栏面板结束-->
<script src="/js/vue.js"></script>
<script src="/js/util.js"></script>
<script src="/js/axios.js"></script>
<script src="/js/moment.min.js"></script>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            ly,
            entity: {},      //商品详情
            message: '距离结束：',     //倒计时时间提示
            msg: '',         //抢单提示信息
        },
        methods: {
            //查询订单抢单状态
            queryStatus: function () {
                //120秒查询抢购信息
                let count = 120;

                //定时查询->window.setInterval()
                let queryClock = window.setInterval(function () {
                    //时间递减
                    count--;

                    //根据状态判断对应操作
                    leyou.http.get("/seckill/order/query").then(function (response) {
                        //403->未登录->登录
                        if (response.data.code == 403) {
                            location.href = "/seckill/redirect/back";
                        } else if (response.data.code == 1) {
                            //1->排队中->继续定时查询
                            app.msg = '正在排队....' + count;
                        } else if (response.data.code == 2) {
                            //2->抢单成功
                            app.msg = '抢单成功，即将进入支付！';

                            //跳转到支付页->携带订单号+订单金额
                            location.href = "/payOrder.html?orderId=" + response.data.other.orderId + "&money=" + response.data.other.money * 100;
                        } else {
                            //0->抢单失败
                            if (response.data.code == 0) {
                                window.clearInterval(queryClock);
                                app.msg = '服务器繁忙，请稍后再试！';
                            } else if (response.data.code == 404) {
                                //404->找不到数据
                                app.msg = '抢单失败，稍后再试！';
                            }
                            //停止查询
                            window.clearInterval(queryClock);
                        }
                    });
                }, 1000);
            },


            //添加订单方法
            add: function () {
                //1.先判断登录状态
                ly.verifyUser().then(() => {

                    //2.已经登录
                    //获取地址栏time
                    let time = getQueryString("time");
                    //获取地址栏ID
                    let id = getQueryString("id");

                    leyou.http.get("/seckill/order/add?time=" + time + "&id=" + id).then(function (response) {
                        if (response.data.code == 0 || (response.data.code == 2 && response.data.message == "100")) {
                            //排队成功,查询排队状态
                            app.queryStatus();
                        } else if (response.data.code == 403) {
                            location.href = "seckill/redirect/back";
                        } else if (response.data.code == 2 && response.data.message == "101") {
                            alert("已售罄！")
                        } else {
                            alert(response.data.message)
                        }
                    })
                }).catch(() => {
                    //3.未登陆
                    window.location.href = "/login.html?returnUrl=" + window.location.href;
                    alert("未登录，请先登录！")
                })
            },

                /*//获取地址栏time
                let time = getQueryString("time");
                //获取地址栏ID
                let id = getQueryString("id");

                leyou.http.get("/seckill/order/add?time=" + time + "&id=" + id).then(function (response) {
                    if (response.data.code == 0 || (response.data.code == 2 && response.data.message == "100")) {
                        //排队成功,查询排队状态
                        app.queryStatus();
                    } else if (response.data.code == 403) {
                        location.href = "/redirect/back";
                    } else if (response.data.code == 2 && response.data.message == "101") {
                        alert("已售罄！")
                    } else {
                        alert(response.data.message)
                    }
                })
            },*/


            //获取秒杀商品详情
            getOne: function () {
                //获取地址栏time
                let time = getQueryString("time");
                //获取地址栏ID
                let id = getQueryString("id");

                //根据ID查询商品详情
                leyou.http.get("/seckill/goods/one?time=" + time + "&id=" + id).then(function (response) {
                    app.entity = response.data;

                    //秒杀倒计时时间
                    app.timeCalculate(new Date(app.entity.startTime).getTime(), new Date(app.entity.endTime).getTime());
                });
            },

            /***
             * 时间运算
             * @param starttimes:秒杀开始时间
             * @param endtimes：秒杀结束时间
             */
            timeCalculate: function (starttimes, endtimes) {
                //获取当前时间
                let nowtimes = new Date().getTime();
                if (nowtimes > endtimes) {
                    app.message = '活动已结束！';
                    return;
                }
                //时间差
                let nums = 0;

                //前缀，记录倒计时描述
                let prefix = '距离结束：';

                //判断是距离开始/距离结束
                if (starttimes <= nowtimes) {
                    //距离结束,运算求出nums
                    nums = endtimes - nowtimes;
                } else {
                    //距离开始
                    prefix = '距离开始：';

                    //运算求出nums
                    nums = starttimes - nowtimes;
                }

                //nums定时递减
                let clock = window.setInterval(function () {
                    //时间递减
                    nums = nums - 1000;

                    //消息拼接
                    app.message = prefix + app.timedown(nums);

                    //nums<0
                    if (nums <= 0) {
                        //结束定时任务
                        window.clearInterval(clock);
                        //刷新时间，重新调用该方法
                        app.timeCalculate(starttimes, endtimes);
                    }
                }, 1000);
            },

            //将毫秒转换成天时分秒
            timedown: function (num) {
                var oneSecond = 1000;
                var oneMinute = oneSecond * 60;
                var oneHour = oneMinute * 60
                var oneDay = oneHour * 24;
                //天数
                var days = Math.floor(num / oneDay);
                //小时
                var hours = Math.floor((num % oneDay) / oneHour);
                //分钟
                var minutes = Math.floor((num % oneHour) / oneMinute);
                //秒
                var seconds = Math.floor((num % oneMinute) / oneSecond);
                //拼接时间格式
                var str = days + '天' + hours + '时' + minutes + '分' + seconds + '秒';
                return str;
            }
        },

        created: function () {
            //查询商品详情
            this.getOne();
        }
    });
</script>


</html>